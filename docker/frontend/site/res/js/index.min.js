var ROOT_URL="http://internal.axihub.ca/folding";window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments)}gtag("js",new Date);gtag("config","G-NTH3EFBH2T");function sortJsonByKey(a){return function(c,e){return c[a]>e[a]?1:c[a]<e[a]?-1:0}}function toggleMainButtonStyle(a,c){a=document.getElementById(a+"_button");c.contains("collapsed")?(a.classList.add("btn-primary"),a.classList.remove("btn-success")):(a.classList.add("btn-success"),a.classList.remove("btn-primary"))}
function toggleTeam(a,c){a=document.getElementById("team_"+a+"_button");c.contains("collapsed")?(a.classList.add("btn-primary"),a.classList.remove("btn-success")):(a.classList.add("btn-success"),a.classList.remove("btn-primary"))}
function loadTcStats(){fetch(ROOT_URL+"/tc_stats").then(function(a){return a.json()}).then(function(a){statsDiv=document.getElementById("stats_div");statsTitle=document.createElement("h2");statsTitle.setAttribute("class","navbar-brand");statsTitle.innerHTML="Overall Stats";statsDiv.append(statsTitle);statsTable=document.createElement("table");statsTable.setAttribute("id","stats");statsTable.setAttribute("class","table table-dark table-striped table-hover");statsTableHead=document.createElement("thead");
statsTableHeaderRow=document.createElement("tr");["Total Points","Total Units"].forEach(function(a,b){statsTableHeader=document.createElement("th");statsTableHeader.setAttribute("onclick","sortTable("+b+", 'stats')");statsTableHeader.setAttribute("scope","col");statsTableHeader.innerHTML=a;statsTableHeaderRow.append(statsTableHeader)});statsTableHead.append(statsTableHeaderRow);statsTable.append(statsTableHead);statsTableBody=document.createElement("tbody");statsTableBodyRow=document.createElement("tr");
["totalMultipliedPoints","totalUnits"].forEach(function(b,e){statsTableBodyCell=document.createElement("td");"totalMultipliedPoints"===b&&(statsTableBodyCell.setAttribute("data-toggle","tooltip"),statsTableBodyCell.setAttribute("data-placement","top"),statsTableBodyCell.setAttribute("title","Unmultiplied: "+a.totalPoints.toLocaleString()));statsTableBodyCell.innerHTML=a[b].toLocaleString();statsTableBodyRow.append(statsTableBodyCell)});statsTableBody.append(statsTableBodyRow);statsTable.append(statsTableBody);
statsDiv.append(statsTable);var c="Rank User Category Hardware Points Units".split(" "),e="rankInTeam userName category hardware multipliedPoints units".split(" "),b=a.teams;b.sort(sortJsonByKey("rank"));$.each(b,function(a,b){var d=a+1,f=b.captainName;teamDiv=document.createElement("div");teamDiv.setAttribute("id","team_"+d+"_div");metadataDiv=document.createElement("div");metadataDiv.setAttribute("id","team_"+d+"_metadata");teamTitle=document.createElement("h2");teamTitle.innerHTML="Rank #"+b.rank+
": "+b.teamName;metadataDiv.append(teamTitle);teamStats=document.createElement("h5");teamStats.setAttribute("id","team_"+d+"_stats");teamStats.setAttribute("data-toggle","tooltip");teamStats.setAttribute("data-placement","top");teamStats.setAttribute("title","Unmultiplied: "+b.teamPoints.toLocaleString());teamStats.innerHTML=b.teamMultipliedPoints.toLocaleString()+" points | "+b.teamUnits.toLocaleString()+" units";metadataDiv.append(teamStats);teamButton=document.createElement("button");teamButton.setAttribute("id",
"team_"+d+"_button");teamButton.setAttribute("class","btn ui-btn btn-primary");teamButton.setAttribute("href","#team_"+d+"_subdiv");teamButton.setAttribute("onclick","toggleTeam("+d+", this.classList)");teamButton.setAttribute("data-bs-toggle","collapse");teamButton.setAttribute("role","button");teamButton.innerHTML="Show/Hide";metadataDiv.append(teamButton);teamDiv.append(metadataDiv);subDiv=document.createElement("div");subDiv.setAttribute("id","team_"+d+"_subdiv");subDiv.setAttribute("class","collapse");
teamTable=document.createElement("table");teamTable.setAttribute("id","team_"+d);teamTable.setAttribute("class","table table-dark table-striped table-hover");teamTableHead=document.createElement("thead");teamTableHeaderRow=document.createElement("tr");c.forEach(function(a,b){teamTableHeaderCell=document.createElement("th");teamTableHeaderCell.setAttribute("onclick","sortTable("+b+", 'team_"+d+"')");teamTableHeaderCell.setAttribute("scope","col");teamTableHeaderCell.innerHTML=a;teamTableHeaderRow.append(teamTableHeaderCell)});
teamTableHead.append(teamTableHeaderRow);teamTable.append(teamTableHead);teamTableBody=document.createElement("tbody");activeUsers=b.activeUsers;activeUsers.forEach(function(a,b){teamTableBodyRow=document.createElement("tr");e.forEach(function(b,d){teamTableUserCell=document.createElement("td");"multipliedPoints"===b?(teamTableUserCell.setAttribute("data-toggle","tooltip"),teamTableUserCell.setAttribute("data-placement","left"),teamTableUserCell.setAttribute("title","Unmultiplied: "+a.points.toLocaleString()),
teamTableUserCell.innerHTML=a[b].toLocaleString()):teamTableUserCell.innerHTML="userName"===b&&a[b]===f?a[b].toLocaleString()+" (Captain)":a[b].toLocaleString();teamTableBodyRow.append(teamTableUserCell)});teamTableBody.append(teamTableBodyRow)});retiredUsers=b.retiredUsers;retiredUsers.forEach(function(a,b){teamTableBodyRow=document.createElement("tr");e.forEach(function(b,d){teamTableUserCell=document.createElement("td");"userName"===b?teamTableUserCell.innerHTML=a[b]+" (retired)":("multipliedPoints"===
b&&(teamTableUserCell.setAttribute("data-toggle","tooltip"),teamTableUserCell.setAttribute("data-placement","left"),teamTableUserCell.setAttribute("title","Unmultiplied: "+a.points.toLocaleString())),teamTableUserCell.innerHTML=a[b].toLocaleString());teamTableBodyRow.append(teamTableUserRow)});teamTableBody.append(teamTableBodyRow)});teamTable.append(teamTableBody);subDiv.append(teamTable);teamDiv.append(subDiv);statsDiv.append(teamDiv);statsDiv.append(document.createElement("br"))});$('[data-toggle\x3d"tooltip"]').tooltip();
$("#loader").hide()})}
function loadHardware(){fetch(ROOT_URL+"/hardware").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c=["id","displayName","operatingSystem","multiplier"];hardwareDiv=document.getElementById("hardware_div");hardwareTitle=document.createElement("h2");hardwareTitle.setAttribute("class","navbar-brand");hardwareTitle.innerHTML="Hardware";hardwareDiv.append(hardwareTitle);hardwareTable=document.createElement("table");hardwareTable.setAttribute("id","hardware");hardwareTable.setAttribute("class",
"table table-dark table-striped table-hover");hardwareTableHead=document.createElement("thead");hardwareTableHeaderRow=document.createElement("tr");["ID","Name","Operating System","Multiplier"].forEach(function(a,b){hardwareTableHeader=document.createElement("th");hardwareTableHeader.setAttribute("onclick","sortTable("+b+", 'hardware')");hardwareTableHeader.setAttribute("scope","col");hardwareTableHeader.innerHTML=a;hardwareTableHeaderRow.append(hardwareTableHeader)});hardwareTableHead.append(hardwareTableHeaderRow);
hardwareTable.append(hardwareTableHead);hardwareTableBody=document.createElement("tbody");$.each(a,function(a,b){hardwareTableBodyRow=document.createElement("tr");c.forEach(function(a,e){hardwareTableBodyCell=document.createElement("td");hardwareTableBodyCell.innerHTML="multiplier"===a?"x"+b[a].toLocaleString():b[a].toLocaleString();hardwareTableBodyRow.append(hardwareTableBodyCell)});hardwareTableBody.append(hardwareTableBodyRow)});hardwareTable.append(hardwareTableBody);hardwareDiv.append(hardwareTable)})}
function loadUsers(){fetch(ROOT_URL+"/users").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c="id displayName passkey category hardwareId liveStatsLink".split(" ");usersDiv=document.getElementById("users_div");usersTitle=document.createElement("h2");usersTitle.setAttribute("class","navbar-brand");usersTitle.innerHTML="Users";usersDiv.append(usersTitle);usersTable=document.createElement("table");usersTable.setAttribute("id","users");usersTable.setAttribute("class",
"table table-dark table-striped table-hover");usersTableHead=document.createElement("thead");usersTableHeaderRow=document.createElement("tr");"ID;User;Passkey;Category;Hardware ID;Live Stats Link".split(";").forEach(function(a,b){usersTableHeader=document.createElement("th");usersTableHeader.setAttribute("onclick","sortTable("+b+", 'users')");usersTableHeader.setAttribute("scope","col");usersTableHeader.innerHTML=a;usersTableHeaderRow.append(usersTableHeader)});usersTableHead.append(usersTableHeaderRow);
usersTable.append(usersTableHead);usersTableBody=document.createElement("tbody");$.each(a,function(a,b){usersTableBodyRow=document.createElement("tr");c.forEach(function(a,c){usersTableBodyCell=document.createElement("td");"liveStatsLink"===a?a in b&&(liveStatsLink=document.createElement("a"),liveStatsLink.setAttribute("href",b[a]),liveStatsLink.innerHTML=b[a],usersTableBodyCell.append(liveStatsLink)):usersTableBodyCell.innerHTML=b[a].toLocaleString();usersTableBodyRow.append(usersTableBodyCell)});
usersTableBody.append(usersTableBodyRow)});usersTable.append(usersTableBody);usersDiv.append(usersTable)})}
function loadTeams(){fetch(ROOT_URL+"/teams").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c="id teamName teamDescription captainUserId userIds retiredUserIds".split(" ");teamsDiv=document.getElementById("teams_div");teamsTitle=document.createElement("h2");teamsTitle.setAttribute("class","navbar-brand");teamsTitle.innerHTML="Teams";teamsDiv.append(teamsTitle);teamsTable=document.createElement("table");teamsTable.setAttribute("id","teams");teamsTable.setAttribute("class",
"table table-dark table-striped table-hover");teamsTableHead=document.createElement("thead");teamsTableHeaderRow=document.createElement("tr");"ID;Name;Description;Captain ID;User IDs;Retired User IDs".split(";").forEach(function(a,b){teamsTableHeader=document.createElement("th");teamsTableHeader.setAttribute("onclick","sortTable("+b+", 'teams')");teamsTableHeader.setAttribute("scope","col");teamsTableHeader.innerHTML=a;teamsTableHeaderRow.append(teamsTableHeader)});teamsTableHead.append(teamsTableHeaderRow);
teamsTable.append(teamsTableHead);teamsTableBody=document.createElement("tbody");$.each(a,function(a,b){teamsTableBodyRow=document.createElement("tr");c.forEach(function(a,c){teamsTableBodyCell=document.createElement("td");"liveStatsLink"===a?a in b&&(liveStatsLink=document.createElement("a"),liveStatsLink.setAttribute("href",b[a]),liveStatsLink.innerHTML=b[a],teamsTableBodyCell.append(liveStatsLink)):(teamsTableBodyCell.innerHTML=b[a].toLocaleString(),teamsTableBodyRow.append(teamsTableBodyCell))});
teamsTableBody.append(teamsTableBodyRow)});teamsTable.append(teamsTableBody);teamsDiv.append(teamsTable)})}$(document).ready(function(){loadTcStats();loadHardware();loadUsers();loadTeams();updateTime()});
function sortTable(a,c){var e,b,d,f,g,h,k,l=0;c=document.getElementById(c);b=!0;for(k="asc";b;){b=!1;e=c.rows;for(d=1;d<e.length-1;d++)if(h=!1,f=e[d].getElementsByTagName("TD")[a],g=e[d+1].getElementsByTagName("TD")[a],"asc"==k)if(isNaN(f.innerHTML)||isNaN(g.innerHTML)){if(f.innerHTML.toLowerCase()>g.innerHTML.toLowerCase()){h=!0;break}}else{if(parseInt(f.innerHTML)>parseInt(g.innerHTML)){h=!0;break}}else if("desc"==k)if(isNaN(f.innerHTML)||isNaN(g.innerHTML)){if(f.innerHTML.toLowerCase()<g.innerHTML.toLowerCase()){h=
!0;break}}else if(parseInt(f.innerHTML)<parseInt(g.innerHTML)){h=!0;break}h?(e[d].parentNode.insertBefore(e[d+1],e[d]),b=!0,l++):0==l&&"asc"==k&&(k="desc",b=!0)}}function updateTime(){var a=new Date,a=3600-(a.getUTCMinutes()-15)%60*60-a.getUTCSeconds();minutes=Math.floor(a/60)%60;seconds=a%60;$("#min-part").text(minutes);$("#sec-part").text(String(seconds).padStart(2,"0"));setTimeout(updateTime,1E3-(new Date).getUTCMilliseconds())};