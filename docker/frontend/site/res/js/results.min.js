var ROOT_URL="http://internal.axihub.ca/folding",NUMBER_OF_MONTHS=12,NUMBER_OF_YEARS_TO_SHOW=2,YEAR_START=(new Date).getUTCFullYear(),currentDate=new Date,currentUtcDate=new Date(currentDate.getUTCFullYear(),currentDate.getUTCMonth(),currentDate.getUTCDate(),currentDate.getUTCHours(),currentDate.getUTCMinutes(),currentDate.getUTCSeconds()),selectedMonth=currentUtcDate.getMonth(),selectedYear=currentUtcDate.getFullYear(),selectedMonthName=(new Date(selectedYear,selectedMonth-1,1)).toLocaleString("default",
{month:"long"});
function getPastResult(a,b,c){null!=a&&(selectedMonth=a);null!=b&&(selectedMonthName=b,monthDropdownTitle=document.getElementById("month_dropdown_root"),monthDropdownTitle.innerHTML=selectedMonthName);null!=c&&(selectedYear=c,yearDropdownTitle=document.getElementById("year_dropdown_root"),yearDropdownTitle.innerHTML=selectedYear);show("loader");hide("past_result");fetch(ROOT_URL+"/result/"+selectedYear+"/"+selectedMonth).then(function(a){return a.json()}).then(function(a){for(leaderboardDiv=document.getElementById("leaderboard_div");leaderboardDiv.firstChild;)leaderboardDiv.removeChild(leaderboardDiv.lastChild);
for(categoryDiv=document.getElementById("category_div");categoryDiv.firstChild;)categoryDiv.removeChild(categoryDiv.lastChild);loadTeamLeaderboard(a.teamLeaderboard);loadCategoryLeaderboard(a.userCategoryLeaderboard);hide("loader");show("past_result")}).catch(function(a){hide("loader");console.error("Unexpected error loading result: ",a);return!1})}
function loadTeamLeaderboard(a){var b="rank teamName teamMultipliedPoints teamUnits diffToLeader diffToNext".split(" ");leaderboardDiv=document.getElementById("leaderboard_div");leaderboardTitle=document.createElement("h2");leaderboardTitle.setAttribute("class","navbar-brand");leaderboardTitle.innerHTML="Team Leaderboard";leaderboardTable=document.createElement("table");leaderboardTable.setAttribute("id","leaderboard");leaderboardTable.setAttribute("class","table table-dark table-striped table-hover");
leaderboardTableHead=document.createElement("thead");leaderboardTableHeaderRow=document.createElement("tr");"Rank;Team;Points;Units;Points To Leader;Points To Next".split(";").forEach(function(a,b){leaderboardTableHeader=document.createElement("th");leaderboardTableHeader.setAttribute("onclick","sortTable("+b+", 'leaderboard')");leaderboardTableHeader.setAttribute("scope","col");leaderboardTableHeader.innerHTML=a;leaderboardTableHeaderRow.append(leaderboardTableHeader)});leaderboardTableHead.append(leaderboardTableHeaderRow);
leaderboardTable.append(leaderboardTableHead);leaderboardTableBody=document.createElement("tbody");a.forEach(function(a,d){leaderboardTableBodyRow=document.createElement("tr");b.forEach(function(b){leaderboardCell=document.createElement("td");"teamMultipliedPoints"===b&&(leaderboardCell.setAttribute("data-bs-toggle","tooltip"),leaderboardCell.setAttribute("data-placement","top"),leaderboardCell.setAttribute("title","Unmultiplied: "+a.teamPoints.toLocaleString()),new bootstrap.Tooltip(leaderboardCell));
leaderboardCell.innerHTML=a[b].toLocaleString();leaderboardTableBodyRow.append(leaderboardCell)});leaderboardTableBody.append(leaderboardTableBodyRow)});leaderboardTable.append(leaderboardTableBody);leaderboardDiv.append(leaderboardTitle);leaderboardDiv.append(leaderboardTable)}
function loadCategoryLeaderboard(a){categoryDiv=document.getElementById("category_div");var b="Rank;User;Hardware;Points;Units;Points to Leader;Points to Next".split(";"),c="rank displayName hardware multipliedPoints units diffToLeader diffToNext".split(" ");categoryLeaderboardTitle=document.createElement("h2");categoryLeaderboardTitle.setAttribute("class","navbar-brand");categoryLeaderboardTitle.innerHTML="Category Leaderboard";categoryDiv.append(categoryLeaderboardTitle);Object.keys(a).forEach(function(d){var e=
getCategoryFrontend(d);categoryTitle=document.createElement("h2");categoryTitle.setAttribute("class","navbar-brand");categoryTitle.innerHTML=e;categoryDiv.append(categoryTitle);tableId="category_"+d.replace(/\s+/g,"_").toLowerCase();categoryTable=document.createElement("table");categoryTable.setAttribute("id",tableId);categoryTable.setAttribute("class","table table-dark table-striped table-hover");categoryTableHead=document.createElement("thead");categoryTableHeaderRow=document.createElement("tr");
b.forEach(function(a,b){categoryTableHeader=document.createElement("th");categoryTableHeader.setAttribute("onclick","sortTable("+b+", '"+tableId+"')");categoryTableHeader.setAttribute("scope","col");categoryTableHeader.innerHTML=a;categoryTableHeaderRow.append(categoryTableHeader)});categoryTableHead.append(categoryTableHeaderRow);categoryTable.append(categoryTableHead);categoryTableBody=document.createElement("tbody");users=a[d];users.forEach(function(a){categoryTableBodyRow=document.createElement("tr");
c.forEach(function(b){categoryCell=document.createElement("td");"multipliedPoints"===b&&(categoryCell.setAttribute("data-bs-toggle","tooltip"),categoryCell.setAttribute("data-placement","top"),categoryCell.setAttribute("title","Unmultiplied: "+a.points.toLocaleString()),new bootstrap.Tooltip(categoryCell));categoryCell.innerHTML=a[b].toLocaleString();categoryTableBodyRow.append(categoryCell)});categoryTableBody.append(categoryTableBodyRow)});categoryTable.append(categoryTableBody);categoryDiv.append(categoryTable);
categoryDiv.append(document.createElement("br"))})}
function populateMonthDropdown(){for(var a=document.getElementById("month_dropdown");a.firstChild;)a.removeChild(a.lastChild);monthDropdownDiv=document.getElementById("month_dropdown");for(i=0;i<NUMBER_OF_MONTHS;i++)a=(new Date(YEAR_START,i,1)).toLocaleString("default",{month:"long"}),monthButton=document.createElement("button"),monthButton.setAttribute("class","dropdown-item"),monthButton.setAttribute("type","button"),monthButton.setAttribute("onclick","getPastResult("+(i+1)+",'"+a+"',null)"),monthButton.innerHTML=
a,monthDropdownDiv.append(monthButton);monthDropdownTitle=document.getElementById("month_dropdown_root");monthDropdownTitle.innerHTML=selectedMonthName}
function populateYearDropdown(){for(var a=document.getElementById("year_dropdown");a.firstChild;)a.removeChild(a.lastChild);yearDropdownDiv=document.getElementById("year_dropdown");for(i=0;i<NUMBER_OF_YEARS_TO_SHOW;i++)a=YEAR_START-i,yearButton=document.createElement("button"),yearButton.setAttribute("class","dropdown-item"),yearButton.setAttribute("type","button"),yearButton.setAttribute("onclick","getPastResult(null,null,"+a+")"),yearButton.innerHTML=a,yearDropdownDiv.append(yearButton);yearDropdownTitle=
document.getElementById("year_dropdown_root");yearDropdownTitle.innerHTML=selectedYear}document.addEventListener("DOMContentLoaded",function(a){populateMonthDropdown();populateYearDropdown();updateTimer();getPastResult()});function show(a){document.getElementById(a).style.display="block"}function showElement(a){a.style.display="block"}function hide(a){document.getElementById(a).style.display="none"}function hideElement(a){a.style.display="none"}
function getOperatingSystemFrontend(a){return"linux"===a.toLowerCase()?"Linux":"windows"===a.toLowerCase()?"Windows":a}function getOperatingSystemBackend(a){return"linux"===a.toLowerCase()?"linux":"windows"===a.toLowerCase()?"windows":a}function getCategoryFrontend(a){return"amd_gpu"===a.toLowerCase()?"AMD GPU":"nvidia_gpu"===a.toLowerCase()?"nVidia GPU":"wildcard"===a.toLowerCase()?"Wildcard":a}
function getCategoryBackend(a){return"amd gpu"===a.toLowerCase()?"amd_gpu":"nvidia gpu"===a.toLowerCase()?"nvidia_gpu":"wildcard"===a.toLowerCase()?"wildcard":a}var NUMBER_OF_UPDATES_PROPERTY_NAME="numberOfUpdates",UPDATE_MINUTE=55;function startTimer(){calculateNumberOfUpdates();updateTimer()}
function calculateNumberOfUpdates(){var a=new Date,b=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1,0,UPDATE_MINUTE,0,0);seconds=Math.floor((a-b)/1E3);minutes=seconds/60;hours=Math.floor(minutes/60);localContains(NUMBER_OF_UPDATES_PROPERTY_NAME)&&(a=localGet(NUMBER_OF_UPDATES_PROPERTY_NAME),a<hours&&(a=hours-a,document.getElementById("toast-update-count-text").innerHTML=1==a?a.toLocaleString()+" update":a.toLocaleString()+" updates",showToast("toast-update",!0)));localSet(NUMBER_OF_UPDATES_PROPERTY_NAME,
hours)}function updateTimer(){var a=new Date,a=3600-(a.getUTCMinutes()-UPDATE_MINUTE)%60*60-a.getUTCSeconds();minutes=Math.floor(a/60)%60;seconds=a%60;document.getElementById("min-part").innerHTML=minutes;document.getElementById("sec-part").innerHTML=String(seconds).padStart(2,"0");0===minutes&&0===seconds&&showToast("toast-refresh",!1);setTimeout(updateTimer,1E3-(new Date).getUTCMilliseconds())}
function showToast(a,b){(new bootstrap.Toast(document.getElementById(a),{animation:!0,autohide:b,delay:3E3})).show()}function closeToast(a){(new bootstrap.Toast(document.getElementById(a))).dispose()}function successToast(a){document.getElementById("toast-success-text").innerHTML=a;showToast("toast-success",!0)}function failureToast(a){document.getElementById("toast-failure-text").innerHTML=a;showToast("toast-failure",!0)};