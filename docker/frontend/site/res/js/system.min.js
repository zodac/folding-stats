var ROOT_URL="http://internal.axihub.ca/folding";function toggleMainButtonStyle(a,c){a=document.getElementById(a+"_button");c.contains("collapsed")?(a.classList.add("btn-primary"),a.classList.remove("btn-success")):(a.classList.add("btn-success"),a.classList.remove("btn-primary"))}
function loadHardware(){fetch(ROOT_URL+"/hardware").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c=["id","displayName","operatingSystem","multiplier"];hardwareDiv=document.getElementById("hardware_div");hardwareTitle=document.createElement("h2");hardwareTitle.setAttribute("class","navbar-brand");hardwareTitle.innerHTML="Hardware";hardwareDiv.append(hardwareTitle);hardwareTable=document.createElement("table");hardwareTable.setAttribute("id","hardware");hardwareTable.setAttribute("class",
"table table-dark table-striped table-hover");hardwareTableHead=document.createElement("thead");hardwareTableHeaderRow=document.createElement("tr");["ID","Name","Operating System","Multiplier"].forEach(function(a,c){hardwareTableHeader=document.createElement("th");hardwareTableHeader.setAttribute("onclick","sortTable("+c+", 'hardware')");hardwareTableHeader.setAttribute("scope","col");hardwareTableHeader.innerHTML=a;hardwareTableHeaderRow.append(hardwareTableHeader)});hardwareTableHead.append(hardwareTableHeaderRow);
hardwareTable.append(hardwareTableHead);hardwareTableBody=document.createElement("tbody");a.forEach(function(a,e){hardwareTableBodyRow=document.createElement("tr");c.forEach(function(b,d){hardwareTableBodyCell=document.createElement("td");hardwareTableBodyCell.innerHTML="multiplier"===b?"x"+a[b].toLocaleString():a[b].toLocaleString();hardwareTableBodyRow.append(hardwareTableBodyCell)});hardwareTableBody.append(hardwareTableBodyRow)});hardwareTable.append(hardwareTableBody);hardwareDiv.append(hardwareTable)})}
function loadUsers(){fetch(ROOT_URL+"/users").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c="id displayName foldingUserName passkey category hardwareId profileLink liveStatsLink isRetired".split(" ");usersDiv=document.getElementById("users_div");usersTitle=document.createElement("h2");usersTitle.setAttribute("class","navbar-brand");usersTitle.innerHTML="Users";usersDiv.append(usersTitle);usersTable=document.createElement("table");usersTable.setAttribute("id",
"users");usersTable.setAttribute("class","table table-dark table-striped table-hover");usersTableHead=document.createElement("thead");usersTableHeaderRow=document.createElement("tr");"ID;User;Folding Name;Passkey;Category;Hardware ID;Profile Link;Live Stats Link;Retired".split(";").forEach(function(a,c){usersTableHeader=document.createElement("th");usersTableHeader.setAttribute("onclick","sortTable("+c+", 'users')");usersTableHeader.setAttribute("scope","col");usersTableHeader.innerHTML=a;usersTableHeaderRow.append(usersTableHeader)});
usersTableHead.append(usersTableHeaderRow);usersTable.append(usersTableHead);usersTableBody=document.createElement("tbody");a.forEach(function(a,e){usersTableBodyRow=document.createElement("tr");c.forEach(function(b,c){usersTableBodyCell=document.createElement("td");"liveStatsLink"===b||"profileLink"===b?b in a&&(link=document.createElement("a"),link.setAttribute("href",a[b]),link.innerHTML=a[b],usersTableBodyCell.append(link)):b in a&&(usersTableBodyCell.innerHTML=a[b].toLocaleString());usersTableBodyRow.append(usersTableBodyCell)});
usersTableBody.append(usersTableBodyRow)});usersTable.append(usersTableBody);usersDiv.append(usersTable)})}
function loadTeams(){fetch(ROOT_URL+"/teams").then(function(a){return a.json()}).then(function(a){a.sort(sortJsonByKey("id"));var c="id teamName teamDescription forumLink captainUserId userIds retiredUserIds".split(" ");teamsDiv=document.getElementById("teams_div");teamsTitle=document.createElement("h2");teamsTitle.setAttribute("class","navbar-brand");teamsTitle.innerHTML="Teams";teamsDiv.append(teamsTitle);teamsTable=document.createElement("table");teamsTable.setAttribute("id","teams");teamsTable.setAttribute("class",
"table table-dark table-striped table-hover");teamsTableHead=document.createElement("thead");teamsTableHeaderRow=document.createElement("tr");"ID;Name;Description;Forum Link;Captain ID;User IDs;Retired User IDs".split(";").forEach(function(a,c){teamsTableHeader=document.createElement("th");teamsTableHeader.setAttribute("onclick","sortTable("+c+", 'teams')");teamsTableHeader.setAttribute("scope","col");teamsTableHeader.innerHTML=a;teamsTableHeaderRow.append(teamsTableHeader)});teamsTableHead.append(teamsTableHeaderRow);
teamsTable.append(teamsTableHead);teamsTableBody=document.createElement("tbody");a.forEach(function(a,e){teamsTableBodyRow=document.createElement("tr");c.forEach(function(b,c){teamsTableBodyCell=document.createElement("td");"forumLink"===b?b in a&&(link=document.createElement("a"),link.setAttribute("href",a[b]),link.setAttribute("target","_blank"),link.innerHTML=a[b],teamsTableBodyCell.append(link)):b in a&&(teamsTableBodyCell.innerHTML=a[b].toLocaleString());teamsTableBodyRow.append(teamsTableBodyCell)});
teamsTableBody.append(teamsTableBodyRow)});teamsTable.append(teamsTableBody);teamsDiv.append(teamsTable)})}document.addEventListener("DOMContentLoaded",function(a){loadHardware();loadUsers();loadTeams();updateTimer()});function sortJsonByKey(a){return function(c,d){return c[a]>d[a]?1:c[a]<d[a]?-1:0}}
function sortTable(a,c){var d,e,b,f,g,h,k,l=0;c=document.getElementById(c);e=!0;for(k="asc";e;){e=!1;d=c.rows;for(b=1;b<d.length-1;b++)if(h=!1,f=d[b].getElementsByTagName("TD")[a],g=d[b+1].getElementsByTagName("TD")[a],"asc"==k)if(isNaN(f.innerHTML)||isNaN(g.innerHTML)){if(f.innerHTML.toLowerCase()>g.innerHTML.toLowerCase()){h=!0;break}}else{if(parseInt(f.innerHTML)>parseInt(g.innerHTML)){h=!0;break}}else if("desc"==k)if(isNaN(f.innerHTML)||isNaN(g.innerHTML)){if(f.innerHTML.toLowerCase()<g.innerHTML.toLowerCase()){h=
!0;break}}else if(parseInt(f.innerHTML)<parseInt(g.innerHTML)){h=!0;break}h?(d[b].parentNode.insertBefore(d[b+1],d[b]),e=!0,l++):0==l&&"asc"==k&&(k="desc",e=!0)}}var NUMBER_OF_UPDATES_PROPERTY_NAME="numberOfUpdates",UPDATE_MINUTE=55;function startTimer(){calculateNumberOfUpdates();updateTimer()}
function calculateNumberOfUpdates(){if(isStorageAvailable){var a=new Date,c=Date.UTC(a.getUTCFullYear(),a.getUTCMonth(),1,0,UPDATE_MINUTE,0,0);seconds=Math.floor((a-c)/1E3);minutes=seconds/60;hours=Math.floor(minutes/60);storageContains(NUMBER_OF_UPDATES_PROPERTY_NAME)&&(a=storageGet(NUMBER_OF_UPDATES_PROPERTY_NAME),a<hours&&(a=hours-a,document.getElementById("toast-update-count-text").innerHTML=1==a?a.toLocaleString()+" update":a.toLocaleString()+" updates",showToast("toast-update",!0)));storageSet(NUMBER_OF_UPDATES_PROPERTY_NAME,
hours)}else console.log("No local storage available!")}function updateTimer(){var a=new Date,a=3600-(a.getUTCMinutes()-UPDATE_MINUTE)%60*60-a.getUTCSeconds();minutes=Math.floor(a/60)%60;seconds=a%60;document.getElementById("min-part").innerHTML=minutes;document.getElementById("sec-part").innerHTML=String(seconds).padStart(2,"0");0===minutes&&0===seconds&&showToast("toast-refresh",!1);setTimeout(updateTimer,1E3-(new Date).getUTCMilliseconds())}
function showToast(a,c){(new bootstrap.Toast(document.getElementById(a),{animation:!0,autohide:c,delay:3E3})).show()}function closeToast(a){(new bootstrap.Toast(document.getElementById(a))).dispose()};